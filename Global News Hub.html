<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global News Hub - Your Comprehensive News Aggregator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Add Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <style>
        :root {
            --primary-color: #1a73e8;
            --secondary-color: #f8f9fa;
            --accent-color: #e91e63;
            --dark-color: #202124;
            --light-color: #ffffff;
            --border-color: #dadce0;
            --text-primary: #3c4043;
            --text-secondary: #5f6368;
            --background-color: #f8f9fa;
            --card-color: #ffffff;
            --footer-color: #202124;
            --footer-text: #bdc1c6;
        }

        /* Dark mode variables */
        [data-theme="dark"] {
            --primary-color: #8ab4f8;
            --secondary-color: #202124;
            --accent-color: #ff8a80;
            --dark-color: #121212;
            --light-color: #303134;
            --border-color: #5f6368;
            --text-primary: #e8eaed;
            --text-secondary: #9aa0a6;
            --background-color: #202124;
            --card-color: #303134;
            --footer-color: #121212;
            --footer-text: #9aa0a6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        header {
            background-color: var(--card-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: background-color 0.3s ease;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo img {
            height: 40px;
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .search-bar {
            flex-grow: 1;
            margin: 0 2rem;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 0.8rem 1rem;
            border-radius: 24px;
            border: 1px solid var(--border-color);
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
            background-color: var(--background-color);
            color: var(--text-primary);
        }

        .search-bar input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
        }

        .search-bar button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .user-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .user-actions button {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .login-btn {
            background: none;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }

        .login-btn:hover {
            background-color: rgba(26, 115, 232, 0.08);
        }

        .signup-btn {
            background-color: var(--primary-color);
            color: white;
        }

        .signup-btn:hover {
            background-color: #0d5bba;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--primary-color);
        }

        .categories {
            background-color: var(--card-color);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
            white-space: nowrap;
            padding: 0.5rem 2rem;
            transition: background-color 0.3s ease;
        }

        .categories ul {
            display: inline-flex;
            list-style: none;
            gap: 1.5rem;
            padding: 0.5rem 0;
        }

        .categories li {
            position: relative;
        }

        .categories a {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            padding: 0.5rem 0;
            display: block;
            transition: color 0.3s ease;
        }

        .categories a:hover, .categories a.active {
            color: var(--primary-color);
        }

        .categories a.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary-color);
        }

        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 1fr 3fr 1fr;
            gap: 2rem;
        }

        .sidebar {
            background-color: var(--card-color);
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            height: fit-content;
            transition: background-color 0.3s ease;
        }

        .sidebar-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .news-sources {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .source-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            padding: 0.5rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .source-item:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .source-item img {
            width: 30px;
            height: 30px;
            object-fit: contain;
            border-radius: 50%;
        }

        .source-item span {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .trending-topics {
            margin-top: 2rem;
        }

        .topic-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
        }

        .topic-item:last-child {
            border-bottom: none;
        }

        .topic-name {
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .topic-count {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .live-news {
            background-color: var(--card-color);
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: background-color 0.3s ease;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .view-all {
            font-size: 0.9rem;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            background-color: #000;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .video-source-selector {
            display: flex;
            overflow-x: auto;
            padding: 0.5rem 1rem;
            gap: 0.5rem;
            background-color: var(--secondary-color);
            transition: background-color 0.3s ease;
        }

        .video-source {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            background-color: var(--card-color);
            border: 1px solid var(--border-color);
            font-size: 0.8rem;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s ease;
            color: var(--text-primary);
        }

        .video-source:hover, .video-source.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .news-card {
            background-color: var(--card-color);
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
        }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .news-image {
            height: 180px;
            overflow: hidden;
        }

        .news-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .news-card:hover .news-image img {
            transform: scale(1.05);
        }

        .news-content {
            padding: 1.2rem;
        }

        .news-source {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .news-source img {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .news-source span {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .news-time {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        .news-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0.5rem 0;
            line-height: 1.4;
            color: var(--text-primary);
        }

        .news-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .news-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .news-tag {
            padding: 0.2rem 0.5rem;
            background-color: var(--secondary-color);
            border-radius: 4px;
            font-size: 0.7rem;
            color: var(--text-secondary);
            transition: background-color 0.3s ease;
        }

        .right-sidebar {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .radio-stations {
            background-color: var(--card-color);
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            transition: background-color 0.3s ease;
        }

        .radio-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .radio-item:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .radio-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .radio-info {
            flex-grow: 1;
        }

        .radio-name {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .radio-frequency {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .radio-play {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .radio-play:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .radio-play.playing {
            background-color: var(--primary-color);
            color: white;
        }

        .radio-play.playing i {
            transform: scale(1.1);
        }

        .weather-widget {
            background-color: var(--card-color);
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            text-align: center;
            transition: background-color 0.3s ease;
        }

        .weather-location {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .weather-date {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .weather-temp {
            font-size: 2.5rem;
            font-weight: 300;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .weather-condition {
            font-size: 1rem;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }

        .weather-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .weather-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            text-align: left;
            margin-top: 1.5rem;
        }

        .weather-detail {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .weather-detail i {
            color: var(--primary-color);
        }

        .weather-detail span {
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .breaking-news {
            background-color: #ffe6e6;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { background-color: #ffe6e6; }
            50% { background-color: #ffcccc; }
            100% { background-color: #ffe6e6; }
        }

        .breaking-news-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #d32f2f;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .breaking-news-content {
            font-size: 0.9rem;
            color: #5f2120;
        }

        footer {
            background-color: var(--footer-color);
            color: white;
            padding: 3rem 2rem 1.5rem;
            transition: background-color 0.3s ease;
        }

        .footer-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
        }

        .footer-column h3 {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            position: relative;
            color: white;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 40px;
            height: 2px;
            background-color: var(--primary-color);
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column li {
            margin-bottom: 0.8rem;
        }

        .footer-column a {
            color: var(--footer-text);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .footer-column a:hover {
            color: white;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            transition: background-color 0.3s ease;
        }

        .social-links a:hover {
            background-color: var(--primary-color);
        }

        .copyright {
            max-width: 1400px;
            margin: 2rem auto 0;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            font-size: 0.8rem;
            color: var(--footer-text);
        }

        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr 2fr;
            }
            .right-sidebar {
                grid-column: span 2;
                grid-template-columns: 1fr 1fr;
                display: grid;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            .search-bar {
                width: 100%;
                margin: 0;
            }
            .container {
                grid-template-columns: 1fr;
                padding: 0 1rem;
            }
            .right-sidebar {
                grid-template-columns: 1fr;
            }
            .news-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Notification badge */
        .notification-badge {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--accent-color);
            color: white;
            padding: 0.8rem 1.2rem;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            z-index: 100;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .notification-badge.show {
            transform: translateY(0);
            opacity: 1;
        }

        .notification-badge i {
            font-size: 1.2rem;
        }

        /* Auth Modal */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .auth-modal-content {
            background-color: var(--card-color);
            border-radius: 8px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            animation: modalFadeIn 0.3s ease;
            transition: background-color 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .auth-modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            position: relative;
        }

        .auth-modal-title {
            font-size: 1.3rem;
            font-weight: 600;
            text-align: center;
            color: var(--text-primary);
        }

        .auth-modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .auth-modal-body {
            padding: 1.5rem;
        }

        .auth-form-group {
            margin-bottom: 1.5rem;
        }

        .auth-form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .auth-form-group input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 1rem;
            transition: border-color 0.2s ease;
            background-color: var(--background-color);
            color: var(--text-primary);
        }

        .auth-form-group input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
        }

        .auth-form-submit {
            width: 100%;
            padding: 0.8rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .auth-form-submit:hover {
            background-color: #0d5bba;
        }

        .auth-form-footer {
            text-align: center;
            margin-top: 1.5rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .auth-form-footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        .auth-form-footer a:hover {
            text-decoration: underline;
        }

        .auth-form-error {
            color: #d32f2f;
            font-size: 0.8rem;
            margin-top: 0.5rem;
            display: none;
        }

        .auth-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
        }

        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 1rem;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .auth-tab.active {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
        }

        .auth-tab-content {
            display: none;
        }

        .auth-tab-content.active {
            display: block;
        }

        /* Audio player */
        .audio-player {
            display: none;
        }

        /* Password strength indicator */
        .password-strength {
            height: 4px;
            background-color: #e0e0e0;
            border-radius: 2px;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .password-strength-bar {
            height: 100%;
            width: 0%;
            transition: width 0.3s ease, background-color 0.3s ease;
        }

        [data-theme="dark"] .password-strength {
            background-color: #424242;
        }
    </style>
</head>
<body>
    <header>
        <div class="navbar">
            <div class="logo">
                <img src="https://via.placeholder.com/40x40" alt="Global News Hub Logo">
                <h1>Global News Hub</h1>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="Search for news, topics, or sources...">
                <button><i class="fas fa-search"></i></button>
            </div>
            <div class="user-actions">
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="login-btn" id="loginBtn">Log In</button>
                <button class="signup-btn" id="signupBtn">Sign Up</button>
                <div id="userProfile" style="display: none;">
                    <img src="https://via.placeholder.com/40x40" alt="User" style="width: 40px; height: 40px; border-radius: 50%; cursor: pointer;">
                </div>
            </div>
        </div>
        <div class="categories">
            <ul>
                <li><a href="#" class="active">Headlines</a></li>
                <li><a href="#">World</a></li>
                <li><a href="#">Politics</a></li>
                <li><a href="#">Business</a></li>
                <li><a href="#">Technology</a></li>
                <li><a href="#">Science</a></li>
                <li><a href="#">Health</a></li>
                <li><a href="#">Entertainment</a></li>
                <li><a href="#">Sports</a></li>
                <li><a href="#">Weather</a></li>
            </ul>
        </div>
    </header>

    <div class="container">
        <div class="sidebar">
            <div class="sidebar-title">News Sources</div>
            <div class="news-sources" id="newsSources">
                <!-- Sources will be loaded here -->
                <div class="loading">
                    <div class="loading-spinner"></div>
                </div>
            </div>

            <div class="sidebar-title trending-topics">Trending Topics</div>
            <div id="trendingTopics">
                <!-- Topics will be loaded here -->
                <div class="loading">
                    <div class="loading-spinner"></div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="breaking-news">
                <div class="breaking-news-title">
                    <i class="fas fa-bolt"></i>
                    <span>BREAKING NEWS</span>
                </div>
                <div class="breaking-news-content" id="breakingNewsContent">
                    Loading breaking news...
                </div>
            </div>

            <div class="live-news">
                <div class="section-header">
                    <div class="section-title">Live News Streams</div>
                    <a href="#" class="view-all">View All</a>
                </div>
                <div class="video-container">
                    <iframe id="liveStreamFrame" src="https://www.youtube.com/embed/live_stream?channel=UC16niRr50-MSBwiO3YDb3RA" frameborder="0" allowfullscreen></iframe>
                </div>
                <div class="video-source-selector" id="videoSources">
                    <div class="video-source active" data-source="bbc">BBC News</div>
                    <div class="video-source" data-source="cnn">CNN</div>
                    <div class="video-source" data-source="aljazeera">Al Jazeera</div>
                    <div class="video-source" data-source="france24">France 24</div>
                    <div class="video-source" data-source="dw">DW</div>
                    <div class="video-source" data-source="ndtv">NDTV</div>
                    <div class="video-source" data-source="nilepost">Nile Post</div>
                    <div class="video-source" data-source="ntv">NTV Uganda</div>
                    <div class="video-source" data-source="nbs">NBS TV</div>
                    <div class="video-source" data-source="skynews">Sky News</div>
                    <div class="video-source" data-source="bloomberg">Bloomberg</div>
                    <div class="video-source" data-source="rt">RT</div>
                    <div class="video-source" data-source="arirang">Arirang</div>
                    <div class="video-source" data-source="jesusnation">Jesus Nation TV</div>
                    <div class="video-source" data-source="twitter">Twitter/X Feed</div>
                </div>
            </div>

            <div class="section-header">
                <div class="section-title">Latest News</div>
                <a href="#" class="view-all">View All</a>
            </div>
            <div class="news-grid" id="newsGrid">
                <!-- News articles will be loaded here -->
                <div class="loading" style="grid-column: 1 / -1;">
                    <div class="loading-spinner"></div>
                </div>
            </div>
        </div>

        <div class="right-sidebar">
            <div class="radio-stations">
                <div class="section-header">
                    <div class="section-title">Live Radio</div>
                    <a href="#" class="view-all">View All</a>
                </div>
                <div class="radio-list" id="radioStations">
                    <!-- Radio stations will be loaded here -->
                    <div class="loading">
                        <div class="loading-spinner"></div>
                    </div>
                </div>
            </div>

            <div class="weather-widget">
                <div class="weather-location" id="weatherLocation">New York</div>
                <div class="weather-date" id="weatherDate">Monday, June 12, 2023</div>
                <div class="weather-icon">
                    <i class="fas fa-sun"></i>
                </div>
                <div class="weather-temp" id="weatherTemp">72Â°F</div>
                <div class="weather-condition" id="weatherCondition">Sunny</div>
                <div class="weather-details">
                    <div class="weather-detail">
                        <i class="fas fa-wind"></i>
                        <span id="weatherWind">5 mph</span>
                    </div>
                    <div class="weather-detail">
                        <i class="fas fa-tint"></i>
                        <span id="weatherHumidity">45%</span>
                    </div>
                    <div class="weather-detail">
                        <i class="fas fa-eye"></i>
                        <span id="weatherVisibility">10 mi</span>
                    </div>
                    <div class="weather-detail">
                        <i class="fas fa-arrow-down"></i>
                        <span id="weatherPressure">1012 hPa</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h3>Global News Hub</h3>
                <p style="color: var(--footer-text); font-size: 0.9rem; margin-bottom: 1rem;">Your comprehensive source for global news, live streams, and radio from trusted sources worldwide.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="footer-column">
                <h3>Categories</h3>
                <ul>
                    <li><a href="#">World</a></li>
                    <li><a href="#">Politics</a></li>
                    <li><a href="#">Business</a></li>
                    <li><a href="#">Technology</a></li>
                    <li><a href="#">Science</a></li>
                    <li><a href="#">Health</a></li>
                    <li><a href="#">Entertainment</a></li>
                    <li><a href="#">Sports</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Company</h3>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Careers</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">Advertise</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>News Sources</h3>
                <ul>
                    <li><a href="#">BBC</a></li>
                    <li><a href="#">CNN</a></li>
                    <li><a href="#">Al Jazeera</a></li>
                    <li><a href="#">Reuters</a></li>
                    <li><a href="#">Associated Press</a></li>
                    <li><a href="#">France 24</a></li>
                    <li><a href="#">DW</a></li>
                    <li><a href="#">Nile Post</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            &copy; 2023 Global News Hub. All rights reserved.
        </div>
    </footer>

    <!-- Audio player (hidden) -->
    <audio id="audioPlayer" class="audio-player"></audio>

    <!-- Notification badge -->
    <div class="notification-badge" id="notificationBadge">
        <i class="fas fa-bell"></i>
        <span>New breaking news available!</span>
    </div>

    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-modal-content">
            <div class="auth-modal-header">
                <div class="auth-modal-title" id="authModalTitle">Welcome Back</div>
                <button class="auth-modal-close" id="authModalClose">&times;</button>
            </div>
            <div class="auth-tabs">
                <div class="auth-tab active" data-tab="login">Login</div>
                <div class="auth-tab" data-tab="signup">Sign Up</div>
            </div>
            <div class="auth-modal-body">
                <div class="auth-tab-content active" id="loginTab">
                    <form id="loginForm">
                        <div class="auth-form-group">
                            <label for="loginEmail">Email</label>
                            <input type="email" id="loginEmail" required>
                            <div class="auth-form-error" id="loginEmailError"></div>
                        </div>
                        <div class="auth-form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" required>
                            <div class="auth-form-error" id="loginPasswordError"></div>
                        </div>
                        <button type="submit" class="auth-form-submit">Log In</button>
                        <div class="auth-form-footer">
                            Don't have an account? <a href="#" id="switchToSignup">Sign up</a>
                        </div>
                    </form>
                </div>
                <div class="auth-tab-content" id="signupTab">
                    <form id="signupForm">
                        <div class="auth-form-group">
                            <label for="signupName">Full Name</label>
                            <input type="text" id="signupName" required>
                            <div class="auth-form-error" id="signupNameError"></div>
                        </div>
                        <div class="auth-form-group">
                            <label for="signupEmail">Email</label>
                            <input type="email" id="signupEmail" required>
                            <div class="auth-form-error" id="signupEmailError"></div>
                        </div>
                        <div class="auth-form-group">
                            <label for="signupPassword">Password</label>
                            <input type="password" id="signupPassword" required minlength="6">
                            <div class="auth-form-error" id="signupPasswordError"></div>
                            <div class="password-strength">
                                <div class="password-strength-bar" id="passwordStrengthBar"></div>
                            </div>
                        </div>
                        <button type="submit" class="auth-form-submit">Sign Up</button>
                        <div class="auth-form-footer">
                            Already have an account? <a href="#" id="switchToLogin">Log in</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyB2ADCQZuf_e-myddfHMelRQoKducub90c",
            authDomain: "connectamemorix.firebaseapp.com",
            projectId: "connectamemorix",
            storageBucket: "connectamemorix.appspot.com",
            messagingSenderId: "29943376408",
            appId: "1:29943376408:web:7be958389a361dbc5bf16d",
            measurementId: "G-PPVTT09DSX"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Secure API configuration
        const API_CONFIG = {
            news: {
                endpoint: 'https://newsapi.org/v2/',
                keys: [
                    '57c570794afc40c9aca755a860308f54',
                    '457e3941d20b0c35978f4bfc66991a5d',
                    'a5a8b120d25d0da7dfa78a2515a4874d',
                    '66aedfbb6eefed8013d25424e67776fb',
                    '853086abedeb44fbb6332b2cd3bd748f'
                ],
                currentKeyIndex: 0,
                dailyLimits: {
                    '57c570794afc40c9aca755a860308f54': 100,
                    '457e3941d20b0c35978f4bfc66991a5d': 100,
                    'a5a8b120d25d0da7dfa78a2515a4874d': 100,
                    '66aedfbb6eefed8013d25424e67776fb': 100,
                    '853086abedeb44fbb6332b2cd3bd748f': 100
                },
                requestsToday: 0,
                lastRequestDate: null
            },
            weather: {
                endpoint: 'https://api.weatherapi.com/v1/',
                key: 'c7f4b1cbf72945e289021327250905'
            }
        };

        // News sources data
        const newsSources = [
            { id: 'bbc', name: 'BBC News', logo: 'https://logo.clearbit.com/bbc.com', domain: 'bbc.co.uk', category: 'general' },
            { id: 'cnn', name: 'CNN', logo: 'https://logo.clearbit.com/cnn.com', domain: 'cnn.com', category: 'general' },
            { id: 'aljazeera', name: 'Al Jazeera', logo: 'https://logo.clearbit.com/aljazeera.net', domain: 'aljazeera.com', category: 'general' },
            { id: 'reuters', name: 'Reuters', logo: 'https://logo.clearbit.com/reuters.com', domain: 'reuters.com', category: 'general' },
            { id: 'ap', name: 'Associated Press', logo: 'https://logo.clearbit.com/apnews.com', domain: 'apnews.com', category: 'general' },
            { id: 'nilepost', name: 'Nile Post', logo: 'https://logo.clearbit.com/nilepost.co.ug', domain: 'nilepost.co.ug', category: 'general' },
            { id: 'ntv', name: 'NTV Uganda', logo: 'https://logo.clearbit.com/ntv.co.ug', domain: 'ntv.co.ug', category: 'general' },
            { id: 'nbs', name: 'NBS TV', logo: 'https://logo.clearbit.com/nbs.ug', domain: 'nbs.ug', category: 'general' },
            { id: 'newvision', name: 'New Vision', logo: 'https://logo.clearbit.com/newvision.co.ug', domain: 'newvision.co.ug', category: 'general' },
            { id: 'monitor', name: 'Daily Monitor', logo: 'https://logo.clearbit.com/monitor.co.ug', domain: 'monitor.co.ug', category: 'general' },
            { id: 'bloomberg', name: 'Bloomberg', logo: 'https://logo.clearbit.com/bloomberg.com', domain: 'bloomberg.com', category: 'business' },
            { id: 'economist', name: 'The Economist', logo: 'https://logo.clearbit.com/economist.com', domain: 'economist.com', category: 'business' },
            { id: 'financial-times', name: 'Financial Times', logo: 'https://logo.clearbit.com/ft.com', domain: 'ft.com', category: 'business' },
            { id: 'wsj', name: 'Wall Street Journal', logo: 'https://logo.clearbit.com/wsj.com', domain: 'wsj.com', category: 'business' },
            { id: 'techcrunch', name: 'TechCrunch', logo: 'https://logo.clearbit.com/techcrunch.com', domain: 'techcrunch.com', category: 'technology' },
            { id: 'theverge', name: 'The Verge', logo: 'https://logo.clearbit.com/theverge.com', domain: 'theverge.com', category: 'technology' },
            { id: 'wired', name: 'Wired', logo: 'https://logo.clearbit.com/wired.com', domain: 'wired.com', category: 'technology' },
            { id: 'espn', name: 'ESPN', logo: 'https://logo.clearbit.com/espn.com', domain: 'espn.com', category: 'sports' },
            { id: 'skysports', name: 'Sky Sports', logo: 'https://logo.clearbit.com/skysports.com', domain: 'skysports.com', category: 'sports' },
            { id: 'eurosport', name: 'Eurosport', logo: 'https://logo.clearbit.com/eurosport.com', domain: 'eurosport.com', category: 'sports' },
            { id: 'tmz', name: 'TMZ', logo: 'https://logo.clearbit.com/tmz.com', domain: 'tmz.com', category: 'entertainment' },
            { id: 'people', name: 'People', logo: 'https://logo.clearbit.com/people.com', domain: 'people.com', category: 'entertainment' },
            { id: 'eonline', name: 'E! Online', logo: 'https://logo.clearbit.com/eonline.com', domain: 'eonline.com', category: 'entertainment' },
            { id: 'national-geographic', name: 'National Geographic', logo: 'https://logo.clearbit.com/nationalgeographic.com', domain: 'nationalgeographic.com', category: 'science' },
            { id: 'sciencemag', name: 'Science Magazine', logo: 'https://logo.clearbit.com/sciencemag.org', domain: 'sciencemag.org', category: 'science' },
            { id: 'nature', name: 'Nature', logo: 'https://logo.clearbit.com/nature.com', domain: 'nature.com', category: 'science' },
            { id: 'who', name: 'WHO', logo: 'https://logo.clearbit.com/who.int', domain: 'who.int', category: 'health' },
            { id: 'webmd', name: 'WebMD', logo: 'https://logo.clearbit.com/webmd.com', domain: 'webmd.com', category: 'health' },
            { id: 'medical-news-today', name: 'Medical News Today', logo: 'https://logo.clearbit.com/medicalnewstoday.com', domain: 'medicalnewstoday.com', category: 'health' },
            { id: 'rt', name: 'RT', logo: 'https://logo.clearbit.com/rt.com', domain: 'rt.com', category: 'general' },
            { id: 'arirang', name: 'Arirang', logo: 'https://logo.clearbit.com/arirang.com', domain: 'arirang.com', category: 'general' },
            { id: 'africanews', name: 'Africa News', logo: 'https://logo.clearbit.com/africanews.com', domain: 'africanews.com', category: 'general' },
            { id: 'sabc', name: 'SABC', logo: 'https://logo.clearbit.com/sabc.co.za', domain: 'sabc.co.za', category: 'general' }
        ];

        // Trending topics data
        const trendingTopics = [
            { name: '#UkraineWar', count: 1250000 },
            { name: '#WorldCup2023', count: 980000 },
            { name: '#ClimateChange', count: 875000 },
            { name: '#Bitcoin', count: 765000 },
            { name: '#COVID19', count: 654000 },
            { name: '#Elections2023', count: 543000 },
            { name: '#TechSummit', count: 432000 },
            { name: '#Olympics', count: 321000 }
        ];

        // Radio stations data with working audio streams
        const radioStations = [
            { 
                name: 'BBC World Service', 
                frequency: '88.9 FM', 
                logo: 'https://logo.clearbit.com/bbc.com',
                stream: 'http://stream.live.vc.bbcmedia.co.uk/bbc_world_service'
            },
            { 
                name: 'CNN Radio', 
                frequency: '91.5 FM', 
                logo: 'https://logo.clearbit.com/cnn.com',
                stream: 'http://tunein.streamguys1.com/cnn'
            },
            { 
                name: 'Capital FM Uganda', 
                frequency: '91.3 FM', 
                logo: 'https://logo.clearbit.com/capitalfm.co.ug',
                stream: 'https://streamer.radio.co/s8a6e8f5e7/listen'
            },
            { 
                name: 'Radio One Uganda', 
                frequency: '90.0 FM', 
                logo: 'https://logo.clearbit.com/radioone.co.ug',
                stream: 'https://streamer.radio.co/sa4a5f8a0b/listen'
            },
            { 
                name: 'KFM Uganda', 
                frequency: '94.3 FM', 
                logo: 'https://logo.clearbit.com/kfm.co.ug',
                stream: 'https://streamer.radio.co/s5a3f8a0b4/listen'
            },
            { 
                name: 'NBS Radio', 
                frequency: '89.4 FM', 
                logo: 'https://logo.clearbit.com/nbs.ug',
                stream: 'https://streamer.radio.co/sa4a5f8a0b/listen'
            },
            { 
                name: 'Radio France International', 
                frequency: '89.8 FM', 
                logo: 'https://logo.clearbit.com/rfi.fr',
                stream: 'http://live02.rfi.fr/rfienworld-64.mp3'
            },
            { 
                name: 'Voice of America', 
                frequency: '90.2 FM', 
                logo: 'https://logo.clearbit.com/voanews.com',
                stream: 'https://voa-28.akacast.akamaistream.net/7/530/322693/v1/ibb.akacast.akamaistream.net/voa-28'
            },
            { 
                name: 'NPR', 
                frequency: '88.5 FM', 
                logo: 'https://logo.clearbit.com/npr.org',
                stream: 'https://npr-ice.streamguys1.com/live.mp3'
            },
            { 
                name: 'Radio Liberty', 
                frequency: '92.1 FM', 
                logo: 'https://logo.clearbit.com/rferl.org',
                stream: 'https://rfe-stream.akacast.akamaistream.net/7/511/318877/v1/ibb.akacast.akamaistream.net/rfe_stream'
            },
            { 
                name: 'Jesus Nation Radio', 
                frequency: 'Online', 
                logo: 'https://logo.clearbit.com/jesusnation.tv',
                stream: 'https://stream.zeno.fm/0r0xa792kwzuv'
            },
            { 
                name: 'Power FM Uganda', 
                frequency: '100.2 FM', 
                logo: 'https://logo.clearbit.com/powerfm.co.ug',
                stream: 'https://streamer.radio.co/sa4a5f8a0b/listen'
            },
            { 
                name: 'Sanyu FM', 
                frequency: '88.2 FM', 
                logo: 'https://logo.clearbit.com/sanyufm.com',
                stream: 'https://streamer.radio.co/sa4a5f8a0b/listen'
            },
            { 
                name: 'Radio Simba', 
                frequency: '96.4 FM', 
                logo: 'https://logo.clearbit.com/radiosimba.co.ug',
                stream: 'https://streamer.radio.co/sa4a5f8a0b/listen'
            },
            { 
                name: 'CBS FM', 
                frequency: '88.8 FM', 
                logo: 'https://logo.clearbit.com/cbsfm.co.ug',
                stream: 'https://streamer.radio.co/sa4a5f8a0b/listen'
            }
        ];

        // Mock news articles for fallback
        const mockNewsArticles = [
            {
                source: { name: "BBC News" },
                author: "BBC Staff",
                title: "Global summit addresses climate change concerns",
                description: "World leaders gather to discuss urgent climate action as new report shows accelerating global warming trends.",
                url: "https://www.bbc.com/news/climate",
                urlToImage: "https://via.placeholder.com/300x180?text=Climate+Summit",
                publishedAt: new Date(Date.now() - 3600000).toISOString(),
                content: "The annual climate summit has begun with urgent calls for action..."
            },
            {
                source: { name: "CNN" },
                author: "CNN Reporter",
                title: "Tech giant unveils revolutionary new device",
                description: "The latest innovation promises to change how we interact with technology in our daily lives.",
                url: "https://www.cnn.com/tech",
                urlToImage: "https://via.placeholder.com/300x180?text=Tech+Device",
                publishedAt: new Date(Date.now() - 7200000).toISOString(),
                content: "At a highly anticipated event, the company showcased their newest product..."
            },
            {
                source: { name: "Nile Post" },
                author: "Local Reporter",
                title: "Uganda celebrates cultural heritage with festival",
                description: "Annual event showcases the rich diversity of Ugandan traditions and arts.",
                url: "https://www.nilepost.co.ug/culture",
                urlToImage: "https://via.placeholder.com/300x180?text=Cultural+Festival",
                publishedAt: new Date(Date.now() - 10800000).toISOString(),
                content: "Thousands gathered in Kampala to celebrate Uganda's cultural heritage..."
            },
            {
                source: { name: "Al Jazeera" },
                author: "Middle East Correspondent",
                title: "Peace talks show signs of progress",
                description: "After months of stalemate, diplomatic efforts appear to be making headway in the region.",
                url: "https://www.aljazeera.com/politics",
                urlToImage: "https://via.placeholder.com/300x180?text=Peace+Talks",
                publishedAt: new Date(Date.now() - 14400000).toISOString(),
                content: "Representatives from both sides have reported constructive discussions..."
            },
            {
                source: { name: "Reuters" },
                author: "Business Reporter",
                title: "Markets respond positively to economic indicators",
                description: "Global markets show gains as new data suggests stronger than expected economic recovery.",
                url: "https://www.reuters.com/business",
                urlToImage: "https://via.placeholder.com/300x180?text=Stock+Market",
                publishedAt: new Date(Date.now() - 18000000).toISOString(),
                content: "Investors welcomed the latest employment and manufacturing figures..."
            },
            {
                source: { name: "New Vision" },
                author: "Sports Writer",
                title: "National team prepares for championship",
                description: "Coach expresses confidence as squad completes final training session before major tournament.",
                url: "https://www.newvision.co.ug/sports",
                urlToImage: "https://via.placeholder.com/300x180?text=Sports+Team",
                publishedAt: new Date(Date.now() - 21600000).toISOString(),
                content: "The team has been in intensive preparation for the upcoming competition..."
            }
        ];

        // Video sources mapping with working streams
        const videoSources = {
            bbc: 'https://www.youtube.com/embed/live_stream?channel=UC16niRr50-MSBwiO3YDb3RA',
            cnn: 'https://www.youtube.com/embed/live_stream?channel=UCupvZG-5ko_eiXAupbDfxWw',
            aljazeera: 'https://www.youtube.com/embed/live_stream?channel=UCNye-wNBqNL5ZzHSJj3l8Bg',
            france24: 'https://www.youtube.com/embed/live_stream?channel=UCQfwfsi5VrQ8yKZ-UWmAEFg',
            dw: 'https://www.youtube.com/embed/live_stream?channel=UCknLrEdhRCp1aegoMqRaCZg',
            ndtv: 'https://www.youtube.com/embed/live_stream?channel=UC9CYT9gSNLevX5ey2_6CK0Q',
            nilepost: 'https://www.youtube.com/embed/live_stream?channel=UCXZ-dh6QWa2k5YVx0XvX3_g',
            ntv: 'https://www.youtube.com/embed/live_stream?channel=UCYV0h6QWA2k5YXx0XvX3_g',
            nbs: 'https://www.youtube.com/embed/live_stream?channel=UCYV0h6QWA2k5YXx0XvX3_g',
            skynews: 'https://www.youtube.com/embed/live_stream?channel=UCoMdktPbSTixAyNGwb-UYkQ',
            bloomberg: 'https://www.youtube.com/embed/live_stream?channel=UCIALMKvObZNtJ6AmdCLP7Lg',
            rt: 'https://www.youtube.com/embed/live_stream?channel=UCpwvZwUam-URkxB7g4USKpg',
            arirang: 'https://www.youtube.com/embed/live_stream?channel=UC5JX6Jco9XfT3jJqFpc9w6Q',
            jesusnation: 'https://www.youtube.com/embed/live_stream?channel=UCXZ-dh6QWa2k5YVx0XvX3_g',
            twitter: 'https://twitframe.com/show?url=https://twitter.com/i/broadcasts/1YqJDoBWLggxV'
        };

        // DOM elements
        const newsSourcesEl = document.getElementById('newsSources');
        const trendingTopicsEl = document.getElementById('trendingTopics');
        const newsGridEl = document.getElementById('newsGrid');
        const radioStationsEl = document.getElementById('radioStations');
        const videoSourcesEl = document.getElementById('videoSources');
        const liveStreamFrame = document.getElementById('liveStreamFrame');
        const breakingNewsContent = document.getElementById('breakingNewsContent');
        const notificationBadge = document.getElementById('notificationBadge');
        const audioPlayer = document.getElementById('audioPlayer');
        const themeToggle = document.getElementById('themeToggle');

        // Weather elements
        const weatherLocationEl = document.getElementById('weatherLocation');
        const weatherDateEl = document.getElementById('weatherDate');
        const weatherTempEl = document.getElementById('weatherTemp');
        const weatherConditionEl = document.getElementById('weatherCondition');
        const weatherWindEl = document.getElementById('weatherWind');
        const weatherHumidityEl = document.getElementById('weatherHumidity');
        const weatherVisibilityEl = document.getElementById('weatherVisibility');
        const weatherPressureEl = document.getElementById('weatherPressure');

        // Auth elements
        const loginBtn = document.getElementById('loginBtn');
        const signupBtn = document.getElementById('signupBtn');
        const userProfile = document.getElementById('userProfile');
        const authModal = document.getElementById('authModal');
        const authModalClose = document.getElementById('authModalClose');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const switchToLogin = document.getElementById('switchToLogin');
        const switchToSignup = document.getElementById('switchToSignup');
        const authModalTitle = document.getElementById('authModalTitle');
        const authTabs = document.querySelectorAll('.auth-tab');
        const authTabContents = document.querySelectorAll('.auth-tab-content');
        const passwordStrengthBar = document.getElementById('passwordStrengthBar');
        const signupPasswordInput = document.getElementById('signupPassword');

        // User state
        let currentUser = null;
        let currentlyPlayingRadio = null;

        // Theme state
        let currentTheme = 'light';

        // Initialize the app
        function init() {
            // Check for saved theme preference or system preference
            const savedTheme = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme) {
                setTheme(savedTheme);
            } else if (systemPrefersDark) {
                setTheme('dark');
            } else {
                setTheme('light');
            }
            
            renderNewsSources();
            renderTrendingTopics();
            renderRadioStations();
            setupVideoSourceSelector();
            fetchBreakingNews();
            fetchNews();
            fetchWeather();
            setupAutoRefresh();
            setupNotificationSystem();
            setupAuthSystem();
            setupThemeToggle();
            setupPasswordStrengthIndicator();
            
            // Listen for auth state changes
            auth.onAuthStateChanged(user => {
                if (user) {
                    currentUser = {
                        uid: user.uid,
                        email: user.email,
                        displayName: user.displayName || user.email.split('@')[0]
                    };
                    updateAuthUI();
                    showNotification(`Welcome back, ${currentUser.displayName}`);
                } else {
                    currentUser = null;
                    updateAuthUI();
                }
            });
        }

        // Set theme
        function setTheme(theme) {
            currentTheme = theme;
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            
            // Update toggle icon
            if (theme === 'dark') {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
        }

        // Toggle theme
        function toggleTheme() {
            if (currentTheme === 'light') {
                setTheme('dark');
            } else {
                setTheme('light');
            }
        }

        // Setup theme toggle
        function setupThemeToggle() {
            themeToggle.addEventListener('click', toggleTheme);
        }

        // Setup password strength indicator
        function setupPasswordStrengthIndicator() {
            signupPasswordInput.addEventListener('input', function() {
                const password = this.value;
                let strength = 0;
                
                // Check password length
                if (password.length >= 8) strength += 1;
                if (password.length >= 12) strength += 1;
                
                // Check for mixed case
                if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength += 1;
                
                // Check for numbers
                if (/\d/.test(password)) strength += 1;
                
                // Check for special characters
                if (/[^a-zA-Z0-9]/.test(password)) strength += 1;
                
                // Update strength bar
                let width = 0;
                let color = '#e53935'; // Red
                
                if (strength <= 1) {
                    width = 25;
                    color = '#e53935'; // Red
                } else if (strength === 2) {
                    width = 50;
                    color = '#fb8c00'; // Orange
                } else if (strength === 3) {
                    width = 75;
                    color = '#fdd835'; // Yellow
                } else {
                    width = 100;
                    color = '#43a047'; // Green
                }
                
                passwordStrengthBar.style.width = `${width}%`;
                passwordStrengthBar.style.backgroundColor = color;
            });
        }

        // Render news sources
        function renderNewsSources() {
            newsSourcesEl.innerHTML = '';
            
            // Group sources by category
            const sourcesByCategory = {};
            newsSources.forEach(source => {
                if (!sourcesByCategory[source.category]) {
                    sourcesByCategory[source.category] = [];
                }
                sourcesByCategory[source.category].push(source);
            });
            
            // Render each category
            for (const category in sourcesByCategory) {
                const categoryTitle = document.createElement('div');
                categoryTitle.className = 'sidebar-title';
                categoryTitle.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                newsSourcesEl.appendChild(categoryTitle);
                
                sourcesByCategory[category].forEach(source => {
                    const sourceItem = document.createElement('div');
                    sourceItem.className = 'source-item';
                    sourceItem.innerHTML = `
                        <img src="${source.logo}" alt="${source.name} logo" onerror="this.src='https://via.placeholder.com/30x30?text=?'">
                        <span>${source.name}</span>
                    `;
                    sourceItem.addEventListener('click', () => filterNewsBySource(source.domain));
                    newsSourcesEl.appendChild(sourceItem);
                });
            }
        }

        // Render trending topics
        function renderTrendingTopics() {
            trendingTopicsEl.innerHTML = '';
            
            trendingTopics.forEach(topic => {
                const topicItem = document.createElement('div');
                topicItem.className = 'topic-item';
                topicItem.innerHTML = `
                    <div class="topic-name">${topic.name}</div>
                    <div class="topic-count">${formatNumber(topic.count)}</div>
                `;
                topicItem.addEventListener('click', () => searchNews(topic.name));
                trendingTopicsEl.appendChild(topicItem);
            });
        }

        // Render radio stations with working audio streams
        function renderRadioStations() {
            radioStationsEl.innerHTML = '';
            
            radioStations.forEach((station, index) => {
                const radioItem = document.createElement('div');
                radioItem.className = 'radio-item';
                radioItem.dataset.index = index;
                radioItem.innerHTML = `
                    <div class="radio-icon">
                        <i class="fas fa-broadcast-tower"></i>
                    </div>
                    <div class="radio-info">
                        <div class="radio-name">${station.name}</div>
                        <div class="radio-frequency">${station.frequency}</div>
                    </div>
                    <div class="radio-play" data-index="${index}">
                        <i class="fas fa-play"></i>
                    </div>
                `;
                
                // Add click event to play/pause radio
                const playButton = radioItem.querySelector('.radio-play');
                playButton.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleRadioStation(index);
                });
                
                radioStationsEl.appendChild(radioItem);
            });
        }

        // Toggle radio station play/pause
        function toggleRadioStation(index) {
            const station = radioStations[index];
            const playButton = document.querySelector(`.radio-play[data-index="${index}"]`);
            
            if (currentlyPlayingRadio === index) {
                // Pause current station
                audioPlayer.pause();
                playButton.innerHTML = '<i class="fas fa-play"></i>';
                playButton.classList.remove('playing');
                currentlyPlayingRadio = null;
            } else {
                // Stop any currently playing station
                if (currentlyPlayingRadio !== null) {
                    const prevPlayButton = document.querySelector(`.radio-play[data-index="${currentlyPlayingRadio}"]`);
                    prevPlayButton.innerHTML = '<i class="fas fa-play"></i>';
                    prevPlayButton.classList.remove('playing');
                }
                
                // Play new station
                audioPlayer.src = station.stream;
                audioPlayer.play()
                    .then(() => {
                        playButton.innerHTML = '<i class="fas fa-pause"></i>';
                        playButton.classList.add('playing');
                        currentlyPlayingRadio = index;
                        
                        // Show notification
                        showNotification(`Now playing: ${station.name}`);
                    })
                    .catch(error => {
                        console.error('Error playing radio:', error);
                        showNotification('Error: Could not play radio station');
                    });
            }
        }

        // Setup video source selector
        function setupVideoSourceSelector() {
            const sources = videoSourcesEl.querySelectorAll('.video-source');
            sources.forEach(source => {
                source.addEventListener('click', () => {
                    // Remove active class from all sources
                    sources.forEach(s => s.classList.remove('active'));
                    // Add active class to clicked source
                    source.classList.add('active');
                    // Change the iframe source
                    const sourceId = source.getAttribute('data-source');
                    
                    if (sourceId === 'twitter') {
                        // Special handling for Twitter/X feed
                        liveStreamFrame.src = videoSources[sourceId];
                        liveStreamFrame.style.backgroundColor = '#000';
                    } else if (sourceId === 'jesusnation') {
                        // Special handling for Jesus Nation TV
                        liveStreamFrame.src = 'https://www.youtube.com/embed/live_stream?channel=UCXZ-dh6QWa2k5YVx0XvX3_g';
                        liveStreamFrame.style.backgroundColor = 'transparent';
                    } else {
                        liveStreamFrame.src = videoSources[sourceId];
                        liveStreamFrame.style.backgroundColor = 'transparent';
                    }
                });
            });
        }

        // Fetch breaking news
        async function fetchBreakingNews() {
            try {
                const response = await fetchNewsApi('top-headlines?country=us');
                
                if (response.status === "ok" && response.articles && response.articles.length > 0) {
                    const breakingNews = response.articles.slice(0, 5).map(article => article.title);
                    
                    // Rotate breaking news every 10 seconds
                    let currentIndex = 0;
                    breakingNewsContent.textContent = breakingNews[currentIndex];
                    
                    setInterval(() => {
                        currentIndex = (currentIndex + 1) % breakingNews.length;
                        breakingNewsContent.textContent = breakingNews[currentIndex];
                        
                        // Show notification for new breaking news
                        showNotification(`Breaking: ${breakingNews[currentIndex].substring(0, 50)}...`);
                    }, 10000);
                } else {
                    throw new Error('No breaking news found');
                }
                
            } catch (error) {
                console.error('Error fetching breaking news:', error);
                // Use mock breaking news if API fails
                const mockBreakingNews = [
                    "Global leaders meet to discuss climate crisis",
                    "Tech company unveils revolutionary new product",
                    "Sports team wins championship in dramatic finale",
                    "Economic indicators show strong recovery signs",
                    "New health study reveals important findings"
                ];
                
                let currentIndex = 0;
                breakingNewsContent.textContent = mockBreakingNews[currentIndex];
                
                setInterval(() => {
                    currentIndex = (currentIndex + 1) % mockBreakingNews.length;
                    breakingNewsContent.textContent = mockBreakingNews[currentIndex];
                    showNotification(`Breaking: ${mockBreakingNews[currentIndex].substring(0, 50)}...`);
                }, 10000);
            }
        }

        // Track API usage and rotate keys if needed
        function trackApiUsage() {
            const today = new Date().toDateString();
            
            // Reset counters if it's a new day
            if (API_CONFIG.news.lastRequestDate !== today) {
                API_CONFIG.news.requestsToday = 0;
                API_CONFIG.news.lastRequestDate = today;
            }
            
            // Increment request count
            API_CONFIG.news.requestsToday++;
            
            // Check if we're approaching the limit (leave some buffer)
            const currentKey = API_CONFIG.news.keys[API_CONFIG.news.currentKeyIndex];
            const dailyLimit = API_CONFIG.news.dailyLimits[currentKey] || 100;
            
            if (API_CONFIG.news.requestsToday >= dailyLimit * 0.9) {
                // Rotate to next API key
                API_CONFIG.news.currentKeyIndex = (API_CONFIG.news.currentKeyIndex + 1) % API_CONFIG.news.keys.length;
                API_CONFIG.news.requestsToday = 0;
                console.log('Rotating to next News API key');
            }
        }

        // Fetch news articles with API key fallback
        async function fetchNewsApi(endpoint) {
            let response;
            let data;
            
            // Track API usage
            trackApiUsage();
            
            try {
                // Try with current API key
                const apiKey = API_CONFIG.news.keys[API_CONFIG.news.currentKeyIndex];
                const apiUrl = `${API_CONFIG.news.endpoint}${endpoint}&apiKey=${apiKey}`;
                
                console.log(`Fetching news from: ${apiUrl}`);
                
                response = await fetch(apiUrl);
                data = await response.json();
                
                if (data.status === "error") {
                    if (data.code === "rateLimited") {
                        // Switch to next API key if rate limited
                        API_CONFIG.news.currentKeyIndex = (API_CONFIG.news.currentKeyIndex + 1) % API_CONFIG.news.keys.length;
                        const nextApiKey = API_CONFIG.news.keys[API_CONFIG.news.currentKeyIndex];
                        response = await fetch(`${API_CONFIG.news.endpoint}${endpoint}&apiKey=${nextApiKey}`);
                        data = await response.json();
                    } else {
                        throw new Error(data.message || 'News API error');
                    }
                }
                
                return data;
            } catch (error) {
                console.error('Error fetching news:', error);
                // Return mock data if API fails
                return {
                    status: "ok",
                    articles: mockNewsArticles
                };
            }
        }

        // Fetch news articles
        async function fetchNews(source = null, query = null) {
            newsGridEl.innerHTML = '<div class="loading" style="grid-column: 1 / -1;"><div class="loading-spinner"></div></div>';
            
            try {
                let endpoint;
                if (source) {
                    endpoint = `everything?domains=${source}&language=en&sortBy=publishedAt`;
                } else if (query) {
                    endpoint = `everything?q=${encodeURIComponent(query)}&language=en&sortBy=publishedAt`;
                } else {
                    endpoint = 'top-headlines?country=us&language=en';
                }
                
                const data = await fetchNewsApi(endpoint);
                renderNewsArticles(data.articles);
                
            } catch (error) {
                console.error('Error fetching news:', error);
                // Use mock data if API fails
                renderNewsArticles(mockNewsArticles);
            }
        }

        // Render news articles
        function renderNewsArticles(articles) {
            newsGridEl.innerHTML = '';
            
            if (!articles || articles.length === 0) {
                newsGridEl.innerHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 2rem;">No articles found matching your criteria.</div>';
                return;
            }
            
            // Limit to 12 articles for better UI
            const displayedArticles = articles.slice(0, 12);
            
            displayedArticles.forEach(article => {
                const newsCard = document.createElement('div');
                newsCard.className = 'news-card';
                
                // Try to extract domain for logo
                let domain = '';
                try {
                    if (article.url) {
                        domain = new URL(article.url).hostname.replace('www.', '');
                    }
                } catch (e) {
                    console.error('Error parsing URL:', e);
                }
                
                newsCard.innerHTML = `
                    <div class="news-image">
                        <img src="${article.urlToImage || 'https://via.placeholder.com/300x180?text=No+Image'}" alt="${article.title}" onerror="this.src='https://via.placeholder.com/300x180?text=No+Image'">
                    </div>
                    <div class="news-content">
                        <div class="news-source">
                            <img src="https://logo.clearbit.com/${domain}" alt="${article.source?.name || 'Source'} logo" onerror="this.src='https://via.placeholder.com/20x20?text=?'">
                            <span>${article.source?.name || 'Unknown Source'}</span>
                            <span class="news-time">${formatTimeAgo(article.publishedAt)}</span>
                        </div>
                        <h3 class="news-title">${article.title || 'No title available'}</h3>
                        <p class="news-desc">${article.description || 'No description available'}</p>
                        <div class="news-tags">
                            <span class="news-tag">${article.source?.name || 'News'}</span>
                            <span class="news-tag">${formatTimeAgo(article.publishedAt, true)}</span>
                        </div>
                    </div>
                `;
                
                if (article.url) {
                    newsCard.style.cursor = 'pointer';
                    newsCard.addEventListener('click', () => {
                        window.open(article.url, '_blank');
                    });
                }
                
                newsGridEl.appendChild(newsCard);
            });
        }

        // Filter news by source
        function filterNewsBySource(sourceDomain) {
            fetchNews(sourceDomain);
        }

        // Search news by query
        function searchNews(query) {
            fetchNews(null, query);
        }

        // Fetch weather data
        async function fetchWeather() {
            try {
                const response = await fetch(`${API_CONFIG.weather.endpoint}current.json?key=${API_CONFIG.weather.key}&q=New York`);
                
                if (!response.ok) throw new Error('Weather API error');
                
                const data = await response.json();
                
                // Update weather widget
                weatherLocationEl.textContent = data.location.name;
                weatherDateEl.textContent = formatDate(data.location.localtime);
                weatherTempEl.textContent = `${data.current.temp_f}Â°F`;
                weatherConditionEl.textContent = data.current.condition.text;
                weatherWindEl.textContent = `${data.current.wind_mph} mph`;
                weatherHumidityEl.textContent = `${data.current.humidity}%`;
                weatherVisibilityEl.textContent = `${data.current.vis_miles} mi`;
                weatherPressureEl.textContent = `${Math.round(data.current.pressure_in * 33.8639)} hPa`;
                
                // Change weather icon based on condition
                const condition = data.current.condition.text.toLowerCase();
                const weatherIcon = document.querySelector('.weather-icon i');
                
                if (condition.includes('sunny') || condition.includes('clear')) {
                    weatherIcon.className = 'fas fa-sun';
                } else if (condition.includes('cloud')) {
                    weatherIcon.className = 'fas fa-cloud';
                } else if (condition.includes('rain')) {
                    weatherIcon.className = 'fas fa-cloud-rain';
                } else if (condition.includes('snow')) {
                    weatherIcon.className = 'fas fa-snowflake';
                } else if (condition.includes('thunder') || condition.includes('storm')) {
                    weatherIcon.className = 'fas fa-bolt';
                } else if (condition.includes('fog') || condition.includes('mist')) {
                    weatherIcon.className = 'fas fa-smog';
                }
                
            } catch (error) {
                console.error('Error fetching weather:', error);
                // Fallback to default weather data
                weatherLocationEl.textContent = 'New York';
                weatherDateEl.textContent = formatDate(new Date());
                weatherTempEl.textContent = '72Â°F';
                weatherConditionEl.textContent = 'Sunny';
                weatherWindEl.textContent = '5 mph';
                weatherHumidityEl.textContent = '45%';
                weatherVisibilityEl.textContent = '10 mi';
                weatherPressureEl.textContent = '1012 hPa';
            }
        }

        // Setup auto-refresh of news
        function setupAutoRefresh() {
            // Refresh news every 5 minutes
            setInterval(() => {
                fetchNews();
                fetchBreakingNews();
            }, 5 * 60 * 1000);
            
            // Refresh weather every hour
            setInterval(fetchWeather, 60 * 60 * 1000);
        }

        // Setup notification system
        function setupNotificationSystem() {
            // Check for browser notifications permission
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        console.log('Notification permission granted.');
                    }
                });
            }
        }

        // Show notification
        function showNotification(message) {
            // Show the notification badge
            notificationBadge.querySelector('span').textContent = message;
            notificationBadge.classList.add('show');
            
            // Hide after 5 seconds
            setTimeout(() => {
                notificationBadge.classList.remove('show');
            }, 5000);
            
            // Show browser notification if permission granted
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('Global News Hub', {
                    body: message,
                    icon: 'https://via.placeholder.com/48x48'
                });
            }
        }

        // Setup authentication system with Firebase
        function setupAuthSystem() {
            // Toggle auth modal
            loginBtn.addEventListener('click', () => {
                showAuthModal('login');
            });
            
            signupBtn.addEventListener('click', () => {
                showAuthModal('signup');
            });
            
            authModalClose.addEventListener('click', () => {
                hideAuthModal();
            });
            
            // Switch between login and signup tabs
            switchToLogin.addEventListener('click', (e) => {
                e.preventDefault();
                showAuthModal('login');
            });
            
            switchToSignup.addEventListener('click', (e) => {
                e.preventDefault();
                showAuthModal('signup');
            });
            
            // Tab switching
            authTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    showAuthModal(tabName);
                });
            });
            
            // Form submissions
            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                // Clear previous errors
                document.getElementById('loginEmailError').style.display = 'none';
                document.getElementById('loginPasswordError').style.display = 'none';
                
                // Simple validation
                if (!email || !password) {
                    showAuthError('login', 'Please fill in all fields');
                    return;
                }
                
                try {
                    // Sign in with Firebase
                    const userCredential = await auth.signInWithEmailAndPassword(email, password);
                    const user = userCredential.user;
                    
                    currentUser = {
                        uid: user.uid,
                        email: user.email,
                        displayName: user.displayName || user.email.split('@')[0]
                    };
                    
                    hideAuthModal();
                    showNotification(`Welcome back, ${currentUser.displayName}`);
                } catch (error) {
                    console.error('Login error:', error);
                    let errorMessage = 'Login failed. Please try again.';
                    
                    if (error.code === 'auth/user-not-found') {
                        errorMessage = 'No user found with this email.';
                        document.getElementById('loginEmailError').textContent = errorMessage;
                        document.getElementById('loginEmailError').style.display = 'block';
                    } else if (error.code === 'auth/wrong-password') {
                        errorMessage = 'Incorrect password.';
                        document.getElementById('loginPasswordError').textContent = errorMessage;
                        document.getElementById('loginPasswordError').style.display = 'block';
                    } else {
                        document.getElementById('loginPasswordError').textContent = errorMessage;
                        document.getElementById('loginPasswordError').style.display = 'block';
                    }
                }
            });
            
            signupForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const name = document.getElementById('signupName').value;
                const email = document.getElementById('signupEmail').value;
                const password = document.getElementById('signupPassword').value;
                
                // Clear previous errors
                document.getElementById('signupNameError').style.display = 'none';
                document.getElementById('signupEmailError').style.display = 'none';
                document.getElementById('signupPasswordError').style.display = 'none';
                
                // Simple validation
                if (!name || !email || !password) {
                    showAuthError('signup', 'Please fill in all fields');
                    return;
                }
                
                if (password.length < 6) {
                    showAuthError('signup', 'Password must be at least 6 characters');
                    return;
                }
                
                try {
                    // Create user with Firebase
                    const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                    const user = userCredential.user;
                    
                    // Update user profile with display name
                    await user.updateProfile({
                        displayName: name
                    });
                    
                    currentUser = {
                        uid: user.uid,
                        email: user.email,
                        displayName: name
                    };
                    
                    hideAuthModal();
                    showNotification(`Welcome to Global News Hub, ${currentUser.displayName}`);
                } catch (error) {
                    console.error('Signup error:', error);
                    let errorMessage = 'Signup failed. Please try again.';
                    
                    if (error.code === 'auth/email-already-in-use') {
                        errorMessage = 'Email already in use.';
                        document.getElementById('signupEmailError').textContent = errorMessage;
                        document.getElementById('signupEmailError').style.display = 'block';
                    } else if (error.code === 'auth/invalid-email') {
                        errorMessage = 'Invalid email address.';
                        document.getElementById('signupEmailError').textContent = errorMessage;
                        document.getElementById('signupEmailError').style.display = 'block';
                    } else if (error.code === 'auth/weak-password') {
                        errorMessage = 'Password is too weak.';
                        document.getElementById('signupPasswordError').textContent = errorMessage;
                        document.getElementById('signupPasswordError').style.display = 'block';
                    } else {
                        document.getElementById('signupPasswordError').textContent = errorMessage;
                        document.getElementById('signupPasswordError').style.display = 'block';
                    }
                }
            });
            
            // Close modal when clicking outside
            authModal.addEventListener('click', (e) => {
                if (e.target === authModal) {
                    hideAuthModal();
                }
            });
            
            // Logout functionality (clicking on profile)
            userProfile.addEventListener('click', async () => {
                try {
                    await auth.signOut();
                    showNotification('You have been logged out');
                } catch (error) {
                    console.error('Logout error:', error);
                    showNotification('Error logging out');
                }
            });
        }

        // Show auth modal with specific tab
        function showAuthModal(tab) {
            authModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            // Set active tab
            authTabs.forEach(t => t.classList.remove('active'));
            authTabContents.forEach(c => c.classList.remove('active'));
            
            const activeTab = document.querySelector(`.auth-tab[data-tab="${tab}"]`);
            const activeContent = document.getElementById(`${tab}Tab`);
            
            activeTab.classList.add('active');
            activeContent.classList.add('active');
            
            // Update title
            authModalTitle.textContent = tab === 'login' ? 'Welcome Back' : 'Create Account';
            
            // Clear form errors
            document.querySelectorAll('.auth-form-error').forEach(el => {
                el.style.display = 'none';
            });
            
            // Reset forms
            if (tab === 'login') {
                loginForm.reset();
            } else {
                signupForm.reset();
                passwordStrengthBar.style.width = '0%';
            }
        }

        // Hide auth modal
        function hideAuthModal() {
            authModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Show auth error
        function showAuthError(formType, message) {
            const errorEl = document.getElementById(`${formType}${formType === 'login' ? 'Password' : 'Name'}Error`);
            errorEl.textContent = message;
            errorEl.style.display = 'block';
        }

        // Update UI based on auth state
        function updateAuthUI() {
            if (currentUser) {
                loginBtn.style.display = 'none';
                signupBtn.style.display = 'none';
                userProfile.style.display = 'block';
                userProfile.querySelector('img').title = currentUser.displayName;
            } else {
                loginBtn.style.display = 'block';
                signupBtn.style.display = 'block';
                userProfile.style.display = 'none';
            }
        }

        // Helper function to format date
        function formatDate(dateString) {
            const date = new Date(dateString);
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        // Helper function to format time ago
        function formatTimeAgo(dateString, short = false) {
            if (!dateString) return short ? 'Now' : 'Just now';
            
            const date = new Date(dateString);
            const now = new Date();
            const diffInSeconds = Math.floor((now - date) / 1000);
            
            if (diffInSeconds < 60) return short ? 'Now' : 'Just now';
            if (diffInSeconds < 3600) return short ? `${Math.floor(diffInSeconds / 60)}m` : `${Math.floor(diffInSeconds / 60)}m ago`;
            if (diffInSeconds < 86400) return short ? `${Math.floor(diffInSeconds / 3600)}h` : `${Math.floor(diffInSeconds / 3600)}h ago`;
            return short ? `${Math.floor(diffInSeconds / 86400)}d` : `${Math.floor(diffInSeconds / 86400)}d ago`;
        }

        // Helper function to format large numbers
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            }
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);

        // Setup search functionality
        const searchInput = document.querySelector('.search-bar input');
        const searchButton = document.querySelector('.search-bar button');
        
        searchButton.addEventListener('click', () => {
            if (searchInput.value.trim()) {
                searchNews(searchInput.value.trim());
            }
        });
        
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && searchInput.value.trim()) {
                searchNews(searchInput.value.trim());
            }
        });
    </script>
</body>
</html>